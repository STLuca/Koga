parser hosted;

structures {
    core.Int;
    core.Array;
    core.ArrayAccessor;
    core.Reference;
    core.Structure;
    core.Pointer;
    core.Return;
    core.Task;
}

documents {
    collection.SimpleList List;
}

collection.ArrayList<Structure T> implements List {

    Array<T> items;

    init(Structure<T> mc, Int size) {
        Reference<ArrayList<T>> this this();
        Pointer<Array<T>> thisItems (this items);
        Array<T> items dynamic(mc size);
        thisItems copyFrom(items);
        Task t complete();
    }

    set(Int index, Int value) {
        Reference<ArrayList<T>> this this();
        Pointer<Array<T>> thisItems (this items);
        Array<T> items;
        thisItems copyTo(items);
        ArrayAccessor<Int> p (items);
        p indexInt(index);
        p copyFrom(value);
        Task t complete();
    }

}
