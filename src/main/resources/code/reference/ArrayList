parser hosted;

structures {
    core.Int;
    core.Array;
    core.ArrayAccessor;
    core.Reference;
    core.Structure;
    core.Pointer;
    core.Return;
    core.Task;
}

documents {
    collection.SimpleList List;
}

collection.ArrayList implements List {

    Array items;

    init(Structure<T> mc, Int size) {
        Reference<ArrayList> this this();
        Pointer<Array> thisItems (this items);
        Array<Int> items dynamic(mc size);
        thisItems copyFrom(items);
        Task t complete();
    }

    set(Int index, Int value) {
        Reference<ArrayList> this this();
        Pointer<Array> thisItems (this items);
        Array<Int> items (0);
        thisItems copyTo(items);
        ArrayAccessor<Int> p (items);
        p indexInt(index);
        p copyFrom(value);
        Task t complete();
    }

}
