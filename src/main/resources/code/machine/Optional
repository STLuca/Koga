parser machineComposite;

structures {
    core.Int;
}

core.Optional<Structure T> {

    Byte[1] present;
    Byte[0] val;

    constructor() {
        i(ADD, II, LDA, present, I, 0d0, I, 0d0);
        Byte[LG T] val;
    }

    constructor(T pVal) {
        i(ADD, II, LDA, present, I, 0d1, I, 0d0);
        Byte[LG T] val;
        m(COPY, III, LDA, val, ADA, pVal, LG, T);
    }

    get(Int p) {
        Proxy(p, val);
    }

}