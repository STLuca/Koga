parser host;

usables {
    core.Int;
    core.If;
    core.Task;
    core.Seq;
    core.Boolean;
    core.Pointer;
    core.Reference;
    core.AdminRef;
    core.Exit;
}

documents {
    util.SimpleAdministrator;
}

test.TryTest {

    main() {
        AdminRef admin init();
        Int x 0;
        Pointer<Int> ptr (x);
        Reference<TryTest> this this();
        Seq {
            this second(ptr);
            this second(ptr);
            this second(ptr);
            this second(ptr);
            this second(ptr);
        } {
            x = 30;
        };
        Exit;
    }

    second(Pointer<Int> ptr) {
        Int test 15;
        Int x;
        ptr -> x;
        x if(test) {
            Task f fail();
        };
        x + 5;
        ptr <- x;
        Task t complete();
    }

}